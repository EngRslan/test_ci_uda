{
  "Parameters": {
    "PipelineId": {
      "Description": "Existing Bucket name",
      "Type": "String"
    }
  },
  "Resources":{
    "CloudFrontOriginAccessIdentity":{
      "Type":"AWS::CloudFront::CloudFrontOriginAccessIdentity",
      "Properties": {
        "CloudFrontOriginAccessIdentityConfig":{
          "Comment":"Origin Access Identity for Serverless Static Website"
        }
      }
    },
    "WebpageCDN":{
      "Type":"AWS::CloudFront::Distribution",
      "Properties":{
        "DistributionConfig":{
          "Origins":[
            {
              "DomainName":{"Fn::Sub":["${PipelineID}.s3.amazonaws.com",{"PipelineID":{"Ref":"PipelineId"}}]},
              "Id":"Webpage",
              "S3OriginConfig":{
                "OriginAccessIdentity": {"Fn::Sub":["origin-access-identity/cloudfront/${CloudFrontOriginAccessIdentity}",{"CloudFrontOriginAccessIdentity":{"Ref":"CloudFrontOriginAccessIdentity"}}]}
              }
            }
          ],
          "Enabled":true,
          "DefaultRootObject":"index.html",
          "DefaultCacheBehavior":{
            "ForwardedValues": {
              "QueryString": false
            },
            "TargetOriginId": "webpage",
            "ViewerProtocolPolicy": "allow-all"
          }
        }
      }
    }
  },
  "Outputs": {
    "PipelineId":{
      "Value":{"Ref":"PipelineId"},
      "Export":{
        "Name": "PipelineId"
      }
    }
  }
}